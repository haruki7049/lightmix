# Modular Composing Example

このサンプルは、lightmixを使用してモジュラー構成でオーディオを生成する方法を示しています。

## 概要

このプロジェクトは、音楽理論と合成の概念を独立したパッケージに分離し、それらを組み合わせて音声を生成する方法を示します。

- **temperaments**: 音律（調律システム）を定義するパッケージ
- **synths**: 音声合成エンジンを提供するパッケージ

これらのパッケージを組み合わせることで、柔軟で保守性の高いオーディオ生成システムを構築できます。

## プロジェクト構造

```
modular-composing/
├── build.zig              # ビルド設定
├── build.zig.zon         # 依存関係の定義
├── src/
│   └── root.zig          # メインエントリーポイント
└── packages/
    ├── temperaments/     # 音律パッケージ
    │   ├── src/
    │   │   ├── root.zig
    │   │   └── twelve_equal_temperament.zig
    │   ├── build.zig
    │   └── build.zig.zon
    └── synths/           # シンセサイザーパッケージ
        ├── src/
        │   ├── synths.zig
        │   └── synths/
        │       └── sine.zig
        ├── build.zig
        └── build.zig.zon
```

## パッケージの説明

### temperaments

音律（音階のチューニングシステム）を提供します。現在は十二平均律（Twelve Equal Temperament）を実装しています。

主な機能：
- MIDI番号から周波数への変換
- 半音単位での音程操作
- 音名とオクターブの管理

### synths

シンセサイザーエンジンを提供します。現在はサイン波オシレーターを実装しています。

主な機能：
- 指定された音程でサイン波を生成
- サンプルレートとチャンネル数のカスタマイズ

## 使い方

このディレクトリで以下のコマンドを実行すると、`result.wav`ファイルが生成されます：

```bash
zig build
```

生成されるファイルは、C4（中央のド）の音を1秒間再生するサイン波の音声ファイルです。

## 拡張方法

このサンプルは、以下のように拡張できます：

1. **新しい音律の追加**: `temperaments`パッケージに新しい音律（例：純正律、ピタゴラス音律）を追加
2. **新しいシンセサイザーの追加**: `synths`パッケージに新しい波形（例：矩形波、のこぎり波、三角波）を追加
3. **複雑な音楽の作成**: 複数の音を組み合わせて和音やメロディーを作成

## 技術的な特徴

- **モジュラー設計**: 各機能が独立したパッケージとして実装されている
- **Zigビルドシステムの活用**: `build.zig`でパッケージ依存関係を管理
- **型安全**: Zigの強力な型システムを活用した安全な実装
- **ビルド時生成**: コンパイル時にWAVファイルを生成

## 必要な環境

- Zig 0.15.2 以上
- lightmix ライブラリ

## ライセンス

このプロジェクトは lightmix プロジェクトの一部であり、同じライセンスが適用されます。
